!function(t){var e={};function a(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=e,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/dist/",a(a.s=1)}([function(t,e,a){},function(t,e,a){"use strict";a.r(e);a(0),d3.select("body").append("div").attr("class","tooltip");var r=function(t){return t.toLowerCase().split(" ").join("-")};!function(){var t=[{ethnicity:"Total Population",numIncarcerated:431,x:100,y:200,r:25,opacity:1},{ethnicity:"All Females",numIncarcerated:63,x:200,y:100,r:9,opacity:1},{ethnicity:"All Males",numIncarcerated:810,x:300,y:50,r:34,opacity:1},{ethnicity:"Black Females",numIncarcerated:88,x:200,y:15,r:11,opacity:1},{ethnicity:"Black Males",numIncarcerated:2272,x:350,y:100,r:57,opacity:1},{ethnicity:"White Females",numIncarcerated:49,x:300,y:200,r:8,opacity:1},{ethnicity:"White Males",numIncarcerated:392,x:250,y:100,r:23,opacity:1},{ethnicity:"Hispanic Females",numIncarcerated:65,x:50,y:50,r:9,opacity:1},{ethnicity:"Hispanic Males",numIncarcerated:1018,x:250,y:50,r:38,opacity:1},{ethnicity:"Other Females",numIncarcerated:113,x:15,y:300,r:12,opacity:1},{ethnicity:"Other Males",numIncarcerated:1215,x:50,y:150,r:41,opacity:1}],e=d3.select("body").append("figure").attr("id","bubble-figure"),a=e.append("svg").attr("id","ethnicity-weighted-all").attr("width",1200).attr("height",600);a.append("text").text("Imprisonment Rates of U.S. Residents by Demographic per 100,000").attr("x",10).attr("y",30);var n=a.append("g").attr("class","legend");n.append("g").attr("id","total-legend").append("text").text("total population"),n.append("g").attr("id","all-legend").append("text").text("all males / all females"),n.append("g").attr("id","black-legend").append("text").text("black"),n.append("g").attr("id","white-legend").append("text").text("white"),n.append("g").attr("id","hispanic-legend").append("text").text("hispanic"),n.append("g").attr("id","other-legend").append("text").text("other"),d3.selectAll(".legend g").append("rect"),d3.selectAll(".legend text").attr("y",(function(t,e){return 15*e+510})).attr("x",30),d3.selectAll(".legend rect").attr("y",(function(t,e){return 15*e+501})).attr("x",15).attr("width",10).attr("height",10),n.append("ellipse").attr("rx",37.7).attr("ry",37.7).attr("cx",200).attr("cy",540),n.append("ellipse").attr("rx",23.8).attr("ry",23.8).attr("cx",200).attr("cy",550),n.append("ellipse").attr("rx",11.9).attr("ry",11.9).attr("cx",200).attr("cy",555),n.append("text").attr("x",192).attr("y",514).text("500").attr("id","circle-text"),n.append("text").attr("x",192).attr("y",538).text("200").attr("id","circle-text"),n.append("text").attr("x",195).attr("y",558).text("50").attr("id","circle-text");var c=d3.line().curve(d3.curveCardinal)([[230,175],[260,160],[270,120],[300,110]]);a.append("path").attr("d",c).attr("fill","none"),a.append("text").attr("x",310).attr("y",107).text("Click and drag a bubble to compare").attr("class","info-text"),a.append("text").attr("x",310).attr("y",123).text("it to the population average.").attr("class","info-text"),a.append("text").attr("x",400).attr("y",590).text("*This graphic was created using data from the Bureau of Justice Statistics 2018 report on U.S. prisons.").attr("class","info-text");var i=d3.forceManyBody().strength(150).distanceMax(4e3).distanceMin(80),o=d3.forceCollide(12).strength(1).iterations(100).radius((function(t){return t.r+25})),l=d3.forceCenter(600,300),d=d3.forceSimulation(t).alphaDecay(.01).force("collisionForce",o).force("center",l).force("attractForce",i),p=a.selectAll("circle").data(t).enter().append("circle").attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})).style("opacity",(function(t){return t.opacity})).call(d3.drag().on("start",(function(t){d.restart(),d.alpha(.7),t.fx=t.x,t.fy=t.y})).on("drag",(function(t){t.fx=d3.event.x,t.fy=d3.event.y})).on("end",(function(t){t.fx=null,t.fy=null,d.alphaTarget(.1)}))).attr("id",(function(t){return"".concat(t.ethnicity.toLowerCase().split(" ")[0],"-bubble")}));e.append("table").attr("id","data-table");var u,s,x=d3.select("#data-table").selectAll("div").data(t).enter().append("div").attr("class","inactive-cell").attr("id",(function(t){return"".concat(r(t.ethnicity),"-cell")})),y=x.append("div"),f=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")};y.append("div").text((function(t){return t.ethnicity})),y.append("div").text((function(t){return"".concat(f(t.numIncarcerated)," per 100,000")})),x.append("div").text((function(t){return"(Approx. 1 in ".concat(f(Math.floor(1e5/t.numIncarcerated)),")")})),u=1.4,s=0,p.attr("r",(function(t,e){return 0===e?(s=Math.pow(parseInt(t.numIncarcerated),.5),25*u):Math.pow(parseInt(t.numIncarcerated),.5)/s*25*u})),p.on("mouseover",(function(t){var e="#".concat(r(t.ethnicity),"-cell");d3.select(e).attr("class","active-cell")})).on("mouseout",(function(t){var e="#".concat(r(t.ethnicity),"-cell");d3.select(e).attr("class","inactive-cell")})),d.on("tick",(function(){p.attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y}))})),a.append("ellipse").attr("rx",35).attr("ry",35).attr("id","comparison").attr("cx",200).attr("cy",200),a.append("text").attr("id","comparison-text").attr("x",191).attr("y",196).text("total"),a.append("text").attr("id","comparison-text").attr("x",179).attr("y",208).text("population")}()}]);
//# sourceMappingURL=main.js.map