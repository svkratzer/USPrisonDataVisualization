{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/scripts/script_utils.js","webpack:///./src/scripts/ethnicity_weighted_all.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","d3","select","append","attr","formatIdName","toLowerCase","split","join","nodeData","ethnicity","numIncarcerated","x","y","opacity","bubbleFigure","svg","text","legend","selectAll","pathData","line","curve","curveCardinal","lineGenerator","attractForce","forceManyBody","strength","distanceMax","distanceMin","collisionForce","forceCollide","iterations","radius","centralForce","forceCenter","width","height","simulation","forceSimulation","alphaDecay","force","node","data","enter","style","drag","on","restart","alpha","fx","fy","event","alphaTarget","scale","baseRadius","cells","firstChild","numberWithCommas","toString","replace","Math","floor","pow","parseInt","cellId","createAllWeightedBubbleChart"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","export const tooltip = d3.select(\"body\")\n  .append(\"div\")\n  .attr(\"class\", \"tooltip\")\n\nexport const spaceCirclesEvenly = (circles, scale) => {\n  let baseRadius = 0;\n  let cumulativeMargin = 0;\n  const lexicalCircles = circles;\n\n  circles.attr(\"cx\", (d, i) => {\n      let extraMargin = 0\n      let ratio = 1;\n      if (i === 0) { \n        baseRadius = Math.pow(parseInt(d.numIncarcerated), 0.5); \n      } else {\n        const prevRadius = parseInt(lexicalCircles._groups[0][i - 1].attributes.r.value);\n        extraMargin = cumulativeMargin + prevRadius\n        ratio = Math.pow(parseInt(d.numIncarcerated), 0.5) / baseRadius;\n      }\n      cumulativeMargin = ((25 * scale * ratio) + (extraMargin) + 25);\n      return (25 * scale * ratio) + (extraMargin) + 25;\n    });\n}\n\nexport const colorCodeCircles = (circles) => {\n  const baseValue = parseInt(circles._groups[0][0].__data__.numIncarcerated);\n  circles.attr(\"class\", (d, i) => {\n    const diff = (parseInt(d.numIncarcerated) / baseValue);\n    if (diff >= 2) {\n      return \"high-positive\";\n    } else if (diff >= 1.5 && diff < 2) {\n      return \"med-positive\";\n    } else if (diff > 1 && diff < 1.5) {\n      return \"low-positive\";\n    } else if (diff >= .75 && diff < 1) {\n      return \"low-negative\";\n    } else if (diff >= .5 && diff < .75) {\n      return \"med-negative\";\n    } else if (diff < .5) {\n      return \"high-negative\";\n    }\n  });\n};\n\nexport const addEthnicityTooltips = (selection) => {\n  selection.on(\"mouseover\", (d) => {\n    return tooltip\n      .style(\"visibility\", \"visible\")\n      .text(createTooltipText(d.ethnicity, d.numIncarcerated));\n  })\n  .on(\"mousemove\", (d) => {\n    return tooltip\n      .style(\"top\", (d3.event.pageY - 20) + \"px\")\n      .style(\"left\", (d3.event.pageX + 20) + \"px\")\n      .text(createTooltipText(d.ethnicity, d.numIncarcerated));\n  })\n  .on(\"mouseout\", (d) => {\n    return tooltip\n      .style(\"visibility\", \"hidden\");\n  });\n};\n\nconst createTooltipText = (ethnicity, numIncarcerated) => {\n  const numberWithCommas = (x) => {\n    return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  }\n  return `${ethnicity}: ${numberWithCommas(numIncarcerated)} per 100,000`\n}\n\nexport const linkTableCellsToBubbles = (selection) => {\n  selection.on(\"mouseover\", (d) => {\n    let cellId = `#${formatIdName(d.ethnicity)}-cell`\n    d3.select(cellId).attr(\"class\", \"active-cell\")\n  })\n    .on(\"mouseout\", (d) => {\n      let cellId = `#${formatIdName(d.ethnicity)}-cell`\n      d3.select(cellId).attr(\"class\", \"inactive-cell\")\n    });\n}\n\nexport const formatIdName = (name) => {\n  const downcased = name.toLowerCase();\n  const arr = downcased.split(\" \");\n  return arr.join(\"-\");\n}\n\nexport const formatClassName = (name) => {\n  const downcased = name.toLowerCase();\n  const arr = downcased.split(\" \");\n  return arr[0];\n}\n\nexport const scaleCircleRadii = (circles, scale) => {\n  let baseRadius = 0;\n  circles\n    .attr(\"r\", (d, i) => {\n      if (i === 0) {\n        baseRadius = Math.pow(parseInt(d.numIncarcerated), 0.5);\n        return 25 * scale;\n      } else {\n        let ratio = Math.pow(parseInt(d.numIncarcerated), 0.5) / baseRadius;\n        return 25 * ratio * scale;\n      }\n    });\n};","import {\n  scaleCircleRadii,\n  formatClassName,\n  formatIdName,\n  linkTableCellsToBubbles\n} from './script_utils';\n\nexport const createAllWeightedBubbleChart = () => {\n  const nodeData = [\n    { ethnicity: \"Total Population\", numIncarcerated: 431, x: 100, y: 200, r: 25, opacity: 1 },\n    { ethnicity: \"All Females\", numIncarcerated: 63, x: 200, y: 100, r: 9, opacity: 1 },\n    { ethnicity: \"All Males\", numIncarcerated: 810, x: 300, y: 50, r: 34, opacity: 1 },\n    { ethnicity: \"Black Females\", numIncarcerated: 88, x: 200, y: 15, r: 11, opacity: 1 },\n    { ethnicity: \"Black Males\", numIncarcerated: 2272, x: 350, y: 100, r: 57, opacity: 1 },\n    { ethnicity: \"White Females\", numIncarcerated: 49, x: 300, y: 200, r: 8, opacity: 1 },\n    { ethnicity: \"White Males\", numIncarcerated: 392, x: 250, y: 100, r: 23, opacity: 1 },\n    { ethnicity: \"Hispanic Females\", numIncarcerated: 65, x: 50, y: 50, r: 9, opacity: 1 },\n    { ethnicity: \"Hispanic Males\", numIncarcerated: 1018, x: 250, y: 50, r: 38, opacity: 1 },\n    { ethnicity: \"Other Females\", numIncarcerated: 113, x: 15, y: 300, r: 12, opacity: 1 },\n    { ethnicity: \"Other Males\", numIncarcerated: 1215, x: 50, y: 150, r: 41, opacity: 1 },\n  ];\n\n\n  const width = 1200;\n  const height = 600;\n\n  const bubbleFigure = d3.select(\"body\")\n    .append(\"figure\")\n    .attr(\"id\", \"bubble-figure\");\n\n  const svg = bubbleFigure\n    .append(\"svg\")\n    .attr(\"id\", \"ethnicity-weighted-all\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n  svg.append(\"text\")\n    .text(\"Imprisonment Rates of U.S. Residents by Demographic per 100,000\")\n    .attr(\"x\", 10)\n    .attr(\"y\", 30)\n\n  const legend = svg.append(\"g\")\n    .attr(\"class\", \"legend\")\n\n  legend.append(\"g\").attr(\"id\", \"total-legend\").append(\"text\").text(\"total population\")\n  legend.append(\"g\").attr(\"id\", \"all-legend\").append(\"text\").text(\"all males / all females\")\n  legend.append(\"g\").attr(\"id\", \"black-legend\").append(\"text\").text(\"black\")\n  legend.append(\"g\").attr(\"id\", \"white-legend\").append(\"text\").text(\"white\")\n  legend.append(\"g\").attr(\"id\", \"hispanic-legend\").append(\"text\").text(\"hispanic\")\n  legend.append(\"g\").attr(\"id\", \"other-legend\").append(\"text\").text(\"other\")\n\n  d3.selectAll(\".legend g\").append(\"rect\")\n\n  d3.selectAll(\".legend text\")\n    .attr(\"y\", (d, i) => { return i * 15 + 510 })\n    .attr(\"x\", 30)\n  d3.selectAll(\".legend rect\")\n    .attr(\"y\", (d, i) => { return i * 15 + 501 })\n    .attr(\"x\", 15)\n    .attr(\"width\", 10)\n    .attr(\"height\", 10)\n\n  legend.append(\"ellipse\")\n    .attr(\"rx\", 37.7)\n    .attr(\"ry\", 37.7)\n    .attr(\"cx\", 200)\n    .attr(\"cy\", 540);\n  legend.append(\"ellipse\")\n    .attr(\"rx\", 23.8)\n    .attr(\"ry\", 23.8)\n    .attr(\"cx\", 200)\n    .attr(\"cy\", 550);\n  legend.append(\"ellipse\")\n    .attr(\"rx\", 11.9)\n    .attr(\"ry\", 11.9)\n    .attr(\"cx\", 200)\n    .attr(\"cy\", 555);\n\n  legend.append(\"text\")\n    .attr(\"x\", 192)\n    .attr(\"y\", 514)\n    .text(\"500\")\n    .attr(\"id\", \"circle-text\");\n  legend.append(\"text\")\n    .attr(\"x\", 192)\n    .attr(\"y\", 538)\n    .text(\"200\")\n    .attr(\"id\", \"circle-text\");\n  legend.append(\"text\")\n    .attr(\"x\", 195)\n    .attr(\"y\", 558)\n    .text(\"50\")\n    .attr(\"id\", \"circle-text\");\n\n  const lineGenerator = d3.line()\n    .curve(d3.curveCardinal);\n\n  const points = [\n    [230, 175],\n    [260, 160],\n    [270, 120],\n    [300, 110]\n  ];\n\n  const pathData = lineGenerator(points);\n\n  svg.append('path')\n    .attr('d', pathData)\n    .attr('fill', 'none')\n  \n  svg.append('text').attr(\"x\", 310).attr(\"y\", 107).text(\"Click and drag a bubble to compare\").attr(\"class\", \"info-text\")\n  svg.append('text').attr(\"x\", 310).attr(\"y\", 123).text(\"it to the population average.\").attr(\"class\", \"info-text\")\n  svg.append('text').attr(\"x\", 400).attr(\"y\", 590).text(\"*This graphic was created using data from the Bureau of Justice Statistics 2018 report on U.S. prisons.\").attr(\"class\", \"info-text\")\n\n  const attractForce = d3.forceManyBody().strength(150).distanceMax(4000).distanceMin(80);\n  const collisionForce = d3.forceCollide(12).strength(1).iterations(100).radius((d) => { return (d.r + 25) });\n  const centralForce = d3.forceCenter(width / 2, height / 2)\n\n  const simulation = d3.forceSimulation(nodeData)\n    .alphaDecay(0.01)\n    .force(\"collisionForce\", collisionForce)\n    .force('center', centralForce)\n    .force(\"attractForce\", attractForce)\n\n  const node = svg\n    .selectAll(\"circle\")\n    .data(nodeData)\n    .enter().append(\"circle\")\n    .attr(\"cx\", (d) => { return d.x; })\n    .attr(\"cy\", (d) => { return d.y; })\n    .style(\"opacity\", (d) => d.opacity)\n    .call(d3.drag()\n      .on(\"start\", dragstarted)\n      .on(\"drag\", dragged)\n      .on(\"end\", dragended))\n    .attr(\"id\", (d) => {\n      return `${formatClassName(d.ethnicity)}-bubble`;\n    });\n\n  bubbleFigure.append(\"table\")\n    .attr(\"id\", \"data-table\")\n\n  const cells = d3.select(\"#data-table\")\n    .selectAll(\"div\")\n    .data(nodeData)\n    .enter()\n    .append(\"div\")\n    .attr(\"class\", \"inactive-cell\")\n    .attr(\"id\", (d) => {\n      return `${formatIdName(d.ethnicity)}-cell`\n    })\n  \n  const firstChild = cells.append(\"div\")\n\n  const numberWithCommas = (x) => {\n    return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  }\n\n  firstChild.append(\"div\").text((d) => {\n    return d.ethnicity;\n  })\n\n  firstChild.append(\"div\").text((d) => {\n    return `${numberWithCommas(d.numIncarcerated)} per 100,000`;\n  })\n\n  cells.append(\"div\").text((d) => {\n    return `(Approx. 1 in ${numberWithCommas(Math.floor(100000 / d.numIncarcerated))})`\n  })\n\n  scaleCircleRadii(node, 1.4);\n  linkTableCellsToBubbles(node);\n\n  function dragstarted(d) {\n    simulation.restart();\n    simulation.alpha(0.7);\n    d.fx = d.x;\n    d.fy = d.y;\n  }\n\n  function dragged(d) {\n    d.fx = d3.event.x;\n    d.fy = d3.event.y;\n  }\n\n  function dragended(d) {\n    d.fx = null;\n    d.fy = null;\n    simulation.alphaTarget(0.1);\n  }\n\n  function ticked() {\n    node.attr(\"cx\", function (d) { return d.x; })\n      .attr(\"cy\", function (d) { return d.y; })\n  }\n\n  simulation.on(\"tick\", ticked);\n\n  svg.append(\"ellipse\")\n    .attr(\"rx\", 35)\n    .attr(\"ry\", 35)\n    .attr(\"id\", \"comparison\")\n    .attr(\"cx\", 200)\n    .attr(\"cy\", 200);\n\n  svg.append(\"text\")\n    .attr(\"id\", \"comparison-text\")\n    .attr(\"x\", 191)\n    .attr(\"y\", 196)\n    .text(\"total\")\n  svg.append(\"text\")\n    .attr(\"id\", \"comparison-text\")\n    .attr(\"x\", 179)\n    .attr(\"y\", 208)\n    .text(\"population\")\n\n}","import \"./styles/index.scss\";\nimport { createAllWeightedBubbleChart } from './scripts/ethnicity_weighted_all';\n\nimport {\n  scaleCircleRadii,\n  formatClassName,\n} from './scripts/script_utils';\n\ncreateAllWeightedBubbleChart();\n\n// const nodeData = [\n//   { ethnicity: \"Total Population\", numIncarcerated: 431, x: 100, y: 200, r: 25, opacity: 1 },\n//   { ethnicity: \"All Females\", numIncarcerated: 63, x: 200, y: 100, r: 9, opacity: 1 },\n//   { ethnicity: \"All Males\", numIncarcerated: 810, x: 300, y: 50, r: 34, opacity: 1 },\n//   { ethnicity: \"Black Females\", numIncarcerated: 88, x: 200, y: 15, r: 11, opacity: 1 },\n//   { ethnicity: \"Black Males\", numIncarcerated: 2272, x: 350, y: 100, r: 57, opacity: 1 },\n//   { ethnicity: \"White Females\", numIncarcerated: 49, x: 300, y: 200, r: 8, opacity: 1 },\n//   { ethnicity: \"White Males\", numIncarcerated: 392, x: 250, y: 100, r: 23, opacity: 1 },\n//   { ethnicity: \"Hispanic Females\", numIncarcerated: 65, x: 50, y: 50, r: 9, opacity: 1 },\n//   { ethnicity: \"Hispanic Males\", numIncarcerated: 1018, x: 250, y: 50, r: 38, opacity: 1 },\n//   { ethnicity: \"Other Females\", numIncarcerated: 113, x: 15, y: 300, r: 12, opacity: 1 },\n//   { ethnicity: \"Other Males\", numIncarcerated: 1215, x: 50, y: 150, r: 41, opacity: 1 },\n// ];\n\n// const width = 1200;\n// const height = 600;\n\n// const bubbleFigure = d3.select(\"body\")\n//   .append(\"figure\")\n//   .attr(\"id\", \"bubble-figure\");\n\n// const svg = bubbleFigure\n//   .append(\"svg\")\n//   .attr(\"id\", \"ethnicity-weighted-all\")\n//   .attr(\"width\", width)\n//   .attr(\"height\", height);\n\n// svg.append(\"text\")\n//   .text(\"Imprisonment Rates of U.S. Residents by Demographic per 100,000\")\n//   .attr(\"x\", 10)\n//   .attr(\"y\", 30)\n\n//   const legend = svg.append(\"g\")\n//     .attr(\"class\", \"legend\")\n\n//   legend.append(\"g\").attr(\"id\", \"total-legend\").append(\"text\").text(\"total population\")\n//   legend.append(\"g\").attr(\"id\", \"all-legend\").append(\"text\").text(\"all males / all females\")\n//   legend.append(\"g\").attr(\"id\", \"black-legend\").append(\"text\").text(\"black\")\n//   legend.append(\"g\").attr(\"id\", \"white-legend\").append(\"text\").text(\"white\")\n//   legend.append(\"g\").attr(\"id\", \"hispanic-legend\").append(\"text\").text(\"hispanic\")\n//   legend.append(\"g\").attr(\"id\", \"other-legend\").append(\"text\").text(\"other\")\n\n//   d3.selectAll(\".legend g\").append(\"rect\")\n\n//   d3.selectAll(\".legend text\")\n//     .attr(\"y\", (d, i) => {return i * 15 + 510})\n//     .attr(\"x\", 30)\n//   d3.selectAll(\".legend rect\")\n//     .attr(\"y\", (d, i) => {return i * 15 + 501})\n//     .attr(\"x\", 15)\n//     .attr(\"width\", 10)\n//     .attr(\"height\", 10)\n\n//   legend.append(\"ellipse\")\n//     .attr(\"rx\", 37.7)\n//     .attr(\"ry\", 37.7)\n//     .attr(\"cx\", 200)\n//     .attr(\"cy\", 540);\n//   legend.append(\"ellipse\")\n//     .attr(\"rx\", 23.8)\n//     .attr(\"ry\", 23.8)\n//     .attr(\"cx\", 200)\n//     .attr(\"cy\", 550);\n//   legend.append(\"ellipse\")\n//     .attr(\"rx\", 11.9)\n//     .attr(\"ry\", 11.9)\n//     .attr(\"cx\", 200)\n//     .attr(\"cy\", 555);\n\n// legend.append(\"text\")\n//   .attr(\"x\", 192)\n//   .attr(\"y\", 514)\n//   .text(\"500\")\n//   .attr(\"id\", \"circle-text\");\n// legend.append(\"text\")\n//   .attr(\"x\", 192)\n//   .attr(\"y\", 538)\n//   .text(\"200\")\n//   .attr(\"id\", \"circle-text\");\n// legend.append(\"text\")\n//   .attr(\"x\", 195)\n//   .attr(\"y\", 558)\n//   .text(\"50\")\n//   .attr(\"id\", \"circle-text\");\n\n\n// const attractForce = d3.forceManyBody().strength(150).distanceMax(4000).distanceMin(80);\n// const collisionForce = d3.forceCollide(12).strength(1).iterations(100).radius((d) => { return (d.r + 25) });\n// const centralForce = d3.forceCenter(width / 2, height / 2)\n\n// const simulation = d3.forceSimulation(nodeData)\n//   .alphaDecay(0.01)\n//   .force(\"collisionForce\", collisionForce)\n//   .force('center', centralForce)\n//   .force(\"attractForce\", attractForce)\n\n// const node = svg\n//   .selectAll(\"circle\")\n//   .data(nodeData)\n//   .enter().append(\"circle\")\n//   .attr(\"cx\", (d) => { return d.x; })\n//   .attr(\"cy\", (d) => { return d.y; })\n//   .style(\"opacity\", (d) => d.opacity)\n//   .call(d3.drag()\n//     .on(\"start\", dragstarted)\n//     .on(\"drag\", dragged)\n//     .on(\"end\", dragended))\n//   .attr(\"id\", (d) => {\n//     return `${formatClassName(d.ethnicity)}-bubble`;\n//   });\n\n// const formatIdName = (name) => {\n//   const downcased = name.toLowerCase();\n//   const arr = downcased.split(\" \");\n//   return arr.join(\"-\");\n// }\n\n// bubbleFigure.append(\"table\")\n//   .attr(\"id\", \"data-table\")\n\n// const cells = d3.select(\"#data-table\")\n//   .selectAll(\"div\")\n//   .data(nodeData)\n//   .enter()\n//   .append(\"div\")\n//   .attr(\"class\", \"inactive-cell\")\n//   .attr(\"id\", (d) => {\n//     return `${formatIdName(d.ethnicity)}-cell`\n//   })\n\n//   cells.append(\"div\").text((d) => {\n//     return d.ethnicity;\n//   })\n\n//   const numberWithCommas = (x) => {\n//     return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n//   }\n\n//   cells.append(\"div\").text((d) => {\n//     return `${numberWithCommas(d.numIncarcerated)}`;\n//   })\n\n// scaleCircleRadii(node, 1.4);\n\n// const linkTableCellsToBubbles = (selection) => {\n//   selection.on(\"mouseover\", (d) => {\n//     let cellId = `#${formatIdName(d.ethnicity)}-cell`\n//     d3.select(cellId).attr(\"class\", \"active-cell\")\n//   })\n//   .on(\"mouseout\", (d) => {\n//     let cellId = `#${formatIdName(d.ethnicity)}-cell`\n//     d3.select(cellId).attr(\"class\", \"inactive-cell\")\n//   });\n// }\n\n// linkTableCellsToBubbles(node);\n\n// function dragstarted(d) {\n//   simulation.restart();\n//   simulation.alpha(0.7);\n//   d.fx = d.x;\n//   d.fy = d.y;\n// }\n\n// function dragged(d) {\n//   d.fx = d3.event.x;\n//   d.fy = d3.event.y;\n// }\n\n// function dragended(d) {\n//   d.fx = null;\n//   d.fy = null;\n//   simulation.alphaTarget(0.1);\n// }\n\n// function ticked() {\n//   node.attr(\"cx\", function (d) { return d.x; })\n//     .attr(\"cy\", function (d) { return d.y; })\n// }\n\n// simulation.on(\"tick\", ticked);\n\n// svg.append(\"ellipse\")\n//   .attr(\"rx\", 35)\n//   .attr(\"ry\", 35)\n//   .attr(\"id\", \"comparison\")\n//   .attr(\"cx\", 200)\n//   .attr(\"cy\", 200);\n\n// svg.append(\"text\")\n//   .attr(\"id\", \"comparison-text\")\n//   .attr(\"x\", 191)\n//   .attr(\"y\", 196)\n//   .text(\"total\")\n// svg.append(\"text\")\n//   .attr(\"id\", \"comparison-text\")\n//   .attr(\"x\", 179)\n//   .attr(\"y\", 208)\n//   .text(\"population\")"],"sourceRoot":""}